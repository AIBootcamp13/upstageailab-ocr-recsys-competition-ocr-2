# Checkpoint Metadata Generation Callback
#
# Generates .metadata.yaml files alongside checkpoints using the Checkpoint
# Catalog V2 schema. This enables fast catalog building (40-100x speedup)
# without loading PyTorch checkpoint files.
#
# Benefits:
#   - Fast catalog builds: ~10ms per checkpoint (vs 2-5 seconds)
#   - Zero training overhead: metadata generation is < 1ms
#   - Required metrics included: precision, recall, hmean, epoch
#
# Usage:
#   Add to your training config:
#     defaults:
#       - callbacks/metadata
#
#   Or enable via command line:
#     python runners/train.py +callbacks/metadata=default

metadata:
  _target_: ocr.lightning_modules.callbacks.MetadataCallback
  exp_name: ${exp_name}  # From main config
  outputs_dir: ${paths.outputs_dir}  # From paths config
  training_phase: "training"  # Can override for finetuning
