============================= test session starts ==============================
platform linux -- Python 3.10.18, pytest-8.4.2, pluggy-1.6.0 -- /home/vscode/workspace/upstageailab-ocr-recsys-competition-ocr-2/.venv/bin/python3
cachedir: .pytest_cache
rootdir: /home/vscode/workspace/upstageailab-ocr-recsys-competition-ocr-2
configfile: pytest.ini
plugins: anyio-4.11.0, hydra-core-1.3.2
collecting ... collected 138 items

tests/unit/test_architecture.py::TestOCRModel::test_model_initialization PASSED [  0%]
tests/unit/test_architecture.py::TestOCRModel::test_forward_pass_with_loss PASSED [  1%]
tests/unit/test_architecture.py::TestOCRModel::test_forward_pass_without_loss PASSED [  2%]
tests/unit/test_architecture.py::TestOCRModel::test_get_optimizers_without_scheduler PASSED [  2%]
tests/unit/test_architecture.py::TestOCRModel::test_get_optimizers_with_scheduler PASSED [  3%]
tests/unit/test_architecture.py::TestOCRModel::test_get_polygons_from_maps PASSED [  4%]
tests/unit/test_architecture.py::TestOCRModel::test_model_initialization_with_registry PASSED [  5%]
tests/unit/test_architecture.py::TestOCRModel::test_component_override_with_decoder_name PASSED [  5%]
tests/unit/test_architecture.py::TestOCRModel::test_dbnet_architecture_passes_postprocess_config PASSED [  6%]
tests/unit/test_checkpoint_utils.py::TestCheckpointHandler::test_on_save_checkpoint_without_metrics PASSED [  7%]
tests/unit/test_checkpoint_utils.py::TestCheckpointHandler::test_on_save_checkpoint_with_metrics PASSED [  7%]
tests/unit/test_checkpoint_utils.py::TestCheckpointHandler::test_on_save_checkpoint_empty_metrics PASSED [  8%]
tests/unit/test_checkpoint_utils.py::TestCheckpointHandler::test_on_save_checkpoint_preserves_existing_checkpoint_data PASSED [  9%]
tests/unit/test_checkpoint_utils.py::TestCheckpointHandler::test_on_save_checkpoint_overwrites_existing_cleval_metrics PASSED [ 10%]
tests/unit/test_checkpoint_utils.py::TestCheckpointHandler::test_on_load_checkpoint_without_cleval_metrics_in_checkpoint PASSED [ 10%]
tests/unit/test_checkpoint_utils.py::TestCheckpointHandler::test_on_load_checkpoint_with_cleval_metrics_in_checkpoint PASSED [ 11%]
tests/unit/test_checkpoint_utils.py::TestCheckpointHandler::test_on_load_checkpoint_empty_cleval_metrics PASSED [ 12%]
tests/unit/test_checkpoint_utils.py::TestCheckpointHandler::test_on_load_checkpoint_overwrites_existing_metrics PASSED [ 13%]
tests/unit/test_checkpoint_utils.py::TestCheckpointHandler::test_on_load_checkpoint_preserves_other_checkpoint_data PASSED [ 13%]
tests/unit/test_checkpoint_utils.py::TestCheckpointHandler::test_on_save_checkpoint_then_on_load_checkpoint_roundtrip PASSED [ 14%]
tests/unit/test_checkpoint_utils.py::TestCheckpointHandler::test_on_save_checkpoint_with_complex_metrics PASSED [ 15%]
tests/unit/test_checkpoint_utils.py::TestCheckpointHandler::test_on_load_checkpoint_with_complex_metrics PASSED [ 15%]
tests/unit/test_command_modules.py::TestCommandModels::test_train_command_params_defaults PASSED [ 16%]
tests/unit/test_command_modules.py::TestCommandModels::test_train_command_params_with_values PASSED [ 17%]
tests/unit/test_command_modules.py::TestCommandModels::test_test_command_params PASSED [ 18%]
tests/unit/test_command_modules.py::TestCommandModels::test_predict_command_params_with_minified_json PASSED [ 18%]
tests/unit/test_command_modules.py::TestQuotingUtils::test_quote_override_no_special_chars PASSED [ 19%]
tests/unit/test_command_modules.py::TestQuotingUtils::test_quote_override_with_special_chars PASSED [ 20%]
tests/unit/test_command_modules.py::TestQuotingUtils::test_quote_override_with_spaces PASSED [ 21%]
tests/unit/test_command_modules.py::TestQuotingUtils::test_quote_override_already_quoted PASSED [ 21%]
tests/unit/test_command_modules.py::TestCommandBuilder::test_build_train_command PASSED [ 22%]
tests/unit/test_command_modules.py::TestCommandBuilder::test_build_test_command PASSED [ 23%]
tests/unit/test_command_modules.py::TestCommandBuilder::test_build_predict_command PASSED [ 23%]
tests/unit/test_command_modules.py::TestCommandBuilder::test_build_command_from_overrides PASSED [ 24%]
tests/unit/test_command_modules.py::TestCommandValidator::test_validate_command_success PASSED [ 25%]
tests/unit/test_command_modules.py::TestCommandValidator::test_validate_command_invalid_structure PASSED [ 26%]
tests/unit/test_command_modules.py::TestCommandValidator::test_validate_command_missing_script PASSED [ 26%]
tests/unit/test_command_modules.py::TestCommandExecutor::test_executor_methods_exist PASSED [ 27%]
tests/unit/test_command_modules.py::TestCommandExecutor::test_executor_methods_callable PASSED [ 28%]
tests/unit/test_config_utils.py::TestExtractMetricKwargs::test_none_input_returns_empty_dict PASSED [ 28%]
tests/unit/test_config_utils.py::TestExtractMetricKwargs::test_empty_config_returns_empty_dict PASSED [ 29%]
tests/unit/test_config_utils.py::TestExtractMetricKwargs::test_config_with_target_field_excludes_target PASSED [ 30%]
tests/unit/test_config_utils.py::TestExtractMetricKwargs::test_config_without_target_field_preserves_all_fields PASSED [ 31%]
tests/unit/test_config_utils.py::TestExtractMetricKwargs::test_non_dict_container_returns_empty_dict PASSED [ 31%]
tests/unit/test_config_utils.py::TestExtractMetricKwargs::test_nested_config_flattens_to_dict PASSED [ 32%]
tests/unit/test_config_utils.py::TestExtractNormalizeStats::test_none_config_returns_none_tuple PASSED [ 33%]
tests/unit/test_config_utils.py::TestExtractNormalizeStats::test_config_without_transforms_returns_none_tuple PASSED [ 34%]
tests/unit/test_config_utils.py::TestExtractNormalizeStats::test_config_with_empty_transforms_returns_none_tuple PASSED [ 34%]
tests/unit/test_config_utils.py::TestExtractNormalizeStats::test_normalize_transform_with_valid_mean_std_returns_arrays PASSED [ 35%]
tests/unit/test_config_utils.py::TestExtractNormalizeStats::test_normalize_transform_with_single_channel_values PASSED [ 36%]
tests/unit/test_config_utils.py::TestExtractNormalizeStats::test_non_normalize_transform_ignored PASSED [ 36%]
tests/unit/test_config_utils.py::TestExtractNormalizeStats::test_normalize_transform_missing_mean_or_std_ignored PASSED [ 37%]
tests/unit/test_config_utils.py::TestExtractNormalizeStats::test_normalize_transform_with_mismatched_mean_std_sizes_ignored PASSED [ 38%]
tests/unit/test_config_utils.py::TestExtractNormalizeStats::test_normalize_transform_with_invalid_array_conversion_ignored PASSED [ 39%]
tests/unit/test_config_utils.py::TestExtractNormalizeStats::test_normalize_transform_with_4_channels_ignored PASSED [ 39%]
tests/unit/test_config_utils.py::TestExtractNormalizeStats::test_all_transform_types_searched PASSED [ 40%]
tests/unit/test_config_utils.py::TestExtractNormalizeStats::test_first_valid_normalize_transform_returned PASSED [ 41%]
tests/unit/test_craft_components.py::test_craft_encoder_output_shapes PASSED [ 42%]
tests/unit/test_craft_components.py::test_craft_decoder_shapes PASSED    [ 42%]
tests/unit/test_craft_components.py::test_craft_head_outputs PASSED      [ 43%]
tests/unit/test_craft_components.py::test_craft_loss_forward PASSED      [ 44%]
tests/unit/test_craft_components.py::test_craft_postprocessor_simple_box PASSED [ 44%]
tests/unit/test_dataset.py::TestOCRDataset::test_dataset_with_annotations PASSED [ 45%]
tests/unit/test_dataset.py::TestOCRDataset::test_dataset_without_annotations PASSED [ 46%]
tests/unit/test_dataset.py::TestOCRDataset::test_getitem PASSED          [ 47%]
tests/unit/test_dataset.py::TestOCRDataset::test_missing_image_file PASSED [ 47%]
tests/unit/test_dataset.py::TestOCRDataset::test_empty_words_in_annotation PASSED [ 48%]
tests/unit/test_dataset.py::TestOCRDataset::test_image_extensions PASSED [ 49%]
tests/unit/test_dataset.py::TestOCRDataset::test_case_insensitive_extension_matching PASSED [ 50%]
tests/unit/test_dbnetpp_components.py::test_dbpp_decoder_output_shape PASSED [ 50%]
tests/unit/test_evaluator.py::TestCLEvalEvaluator::test_init_with_default_values PASSED [ 51%]
tests/unit/test_evaluator.py::TestCLEvalEvaluator::test_init_with_custom_parameters PASSED [ 52%]
tests/unit/test_evaluator.py::TestCLEvalEvaluator::test_update_with_validation_enabled PASSED [ 52%]
tests/unit/test_evaluator.py::TestCLEvalEvaluator::test_update_with_validation_disabled PASSED [ 53%]
tests/unit/test_evaluator.py::TestCLEvalEvaluator::test_reset_clears_predictions PASSED [ 54%]
tests/unit/test_evaluator.py::TestCLEvalEvaluator::test_compute_with_predictions_and_ground_truth PASSED [ 55%]
tests/unit/test_evaluator.py::TestCLEvalEvaluator::test_compute_with_no_predictions PASSED [ 55%]
tests/unit/test_evaluator.py::TestCLEvalEvaluator::test_compute_with_subset_dataset PASSED [ 56%]
tests/unit/test_evaluator.py::TestCLEvalEvaluator::test_validation_toggle_with_enable_validation_true PASSED [ 57%]
tests/unit/test_evaluator.py::TestCLEvalEvaluator::test_validation_toggle_with_enable_validation_false PASSED [ 57%]
tests/unit/test_evaluator.py::TestCLEvalEvaluator::test_compute_with_empty_detection_boxes PASSED [ 58%]
tests/unit/test_evaluator.py::TestCLEvalEvaluator::test_rich_iterator_fallback_when_rich_unavailable PASSED [ 59%]
tests/unit/test_head.py::test_db_head_outputs_prob_maps_alias PASSED     [ 60%]
tests/unit/test_image_processor.py::test_tensor_to_pil_image_rgb_tensor PASSED [ 60%]
tests/unit/test_image_processor.py::test_tensor_to_pil_image_applies_statistics PASSED [ 61%]
tests/unit/test_image_processor.py::test_tensor_to_pil_image_invalid_shape_raises PASSED [ 62%]
tests/unit/test_image_processor.py::test_prepare_wandb_image_resizes_and_preserves_mode PASSED [ 63%]
tests/unit/test_image_processor.py::test_prepare_wandb_image_no_resize_when_smaller PASSED [ 63%]
tests/unit/test_lightning_module.py::test_on_test_epoch_end_handles_missing_predictions PASSED [ 64%]
tests/unit/test_lightning_module.py::test_on_validation_epoch_end_produces_scores_with_orientation PASSED [ 65%]
tests/unit/test_metrics.py::TestCLEvalMetric::test_metric_initialization PASSED [ 65%]
tests/unit/test_metrics.py::TestCLEvalMetric::test_options_class PASSED  [ 66%]
tests/unit/test_metrics.py::TestCLEvalMetric::test_compute_metric PASSED [ 67%]
tests/unit/test_metrics.py::TestCLEvalMetric::test_update_with_empty_predictions PASSED [ 68%]
tests/unit/test_metrics.py::TestCLEvalMetric::test_update_accumulates_data PASSED [ 68%]
tests/unit/test_metrics.py::TestCLEvalMetric::test_reset_clears_state PASSED [ 69%]
tests/unit/test_metrics.py::TestCLEvalMetric::test_persistent_mode PASSED [ 70%]
tests/unit/test_metrics.py::TestCLEvalMetric::test_scale_wise_evaluation PASSED [ 71%]
tests/unit/test_metrics.py::TestCLEvalMetric::test_evaluation_function_called_with_correct_options PASSED [ 71%]
tests/unit/test_metrics.py::TestCLEvalMetric::test_metric_with_different_case_sensitivity PASSED [ 72%]
tests/unit/test_metrics.py::TestCLEvalMetric::test_metric_with_custom_penalties PASSED [ 73%]
tests/unit/test_ocr_postprocess.py::test_threshold_function PASSED       [ 73%]
tests/unit/test_ocr_postprocess.py::test_extract_connected_components PASSED [ 74%]
tests/unit/test_ocr_postprocess.py::test_postprocess_text_map PASSED     [ 75%]
tests/unit/test_ocr_postprocess.py::test_postprocess_with_different_thresholds[0.1] PASSED [ 76%]
tests/unit/test_ocr_postprocess.py::test_postprocess_with_different_thresholds[0.3] PASSED [ 76%]
tests/unit/test_ocr_postprocess.py::test_postprocess_with_different_thresholds[0.5] PASSED [ 77%]
tests/unit/test_ocr_postprocess.py::test_postprocess_with_different_thresholds[0.7] PASSED [ 78%]
tests/unit/test_ocr_postprocess.py::test_postprocess_with_different_thresholds[0.9] PASSED [ 78%]
tests/unit/test_ocr_postprocess.py::test_postprocess_edge_cases PASSED   [ 79%]
tests/unit/test_preprocessing.py::TestDocumentPreprocessor::test_initialization PASSED [ 80%]
tests/unit/test_preprocessing.py::TestDocumentPreprocessor::test_preprocessing_pipeline PASSED [ 81%]
tests/unit/test_preprocessing.py::TestDocumentPreprocessor::test_document_detection PASSED [ 81%]
tests/unit/test_preprocessing.py::TestDocumentPreprocessor::test_doctr_perspective_toggle PASSED [ 82%]
tests/unit/test_preprocessing.py::TestDocumentPreprocessor::test_orientation_correction_metadata PASSED [ 83%]
tests/unit/test_preprocessing.py::TestDocumentPreprocessor::test_padding_cleanup_step PASSED [ 84%]
tests/unit/test_preprocessing.py::TestDocumentPreprocessor::test_image_enhancement PASSED [ 84%]
tests/unit/test_preprocessing.py::TestDocumentPreprocessor::test_resize_to_target PASSED [ 85%]
tests/unit/test_preprocessing.py::TestDocumentPreprocessor::test_order_corners PASSED [ 86%]
tests/unit/test_preprocessing.py::TestLensStylePreprocessorAlbumentations::test_albumentations_wrapper PASSED [ 86%]
tests/unit/test_preprocessing.py::TestLensStylePreprocessorAlbumentations::test_transform_init_args PASSED [ 87%]
tests/unit/test_preprocessing.py::TestPreprocessingIntegration::test_preprocessing_with_real_image PASSED [ 88%]
tests/unit/test_preprocessing.py::TestPreprocessingIntegration::test_error_handling PASSED [ 89%]
tests/unit/test_progress_logger.py::test_get_rich_console_handles_missing_dependency PASSED [ 89%]
tests/unit/test_progress_logger.py::test_get_rich_console_returns_instance PASSED [ 90%]
tests/unit/test_sample_ocr.py::test_tensor_operations PASSED             [ 91%]
tests/unit/test_sample_ocr.py::test_dummy_ocr_component PASSED           [ 92%]
tests/unit/test_sample_ocr.py::test_with_fixtures PASSED                 [ 92%]
tests/unit/test_sample_ocr.py::test_different_input_sizes[input_size0-expected_shape0] PASSED [ 93%]
tests/unit/test_sample_ocr.py::test_different_input_sizes[input_size1-expected_shape1] PASSED [ 94%]
tests/unit/test_sample_ocr.py::test_different_input_sizes[input_size2-expected_shape2] PASSED [ 94%]
tests/unit/test_sample_ocr.py::test_known_buggy_feature XFAIL            [ 95%]
tests/unit/test_sample_ocr.py::test_confidence_filtering PASSED          [ 96%]
tests/unit/test_simple.py::test_basic_arithmetic PASSED                  [ 97%]
tests/unit/test_simple.py::test_string_operations PASSED                 [ 97%]
tests/unit/test_simple.py::test_list_operations PASSED                   [ 98%]
tests/unit/test_ui_engine.py::test_compute_overrides_basic PASSED        [ 99%]
tests/unit/test_ui_engine.py::test_validate_inputs_required_and_required_if PASSED [100%]

=============================== warnings summary ===============================
.venv/lib/python3.10/site-packages/defusedxml/__init__.py:30
  /home/vscode/workspace/upstageailab-ocr-recsys-competition-ocr-2/.venv/lib/python3.10/site-packages/defusedxml/__init__.py:30: DeprecationWarning: defusedxml.cElementTree is deprecated, import from defusedxml.ElementTree instead.
    from . import cElementTree

ui/utils/command/models.py:39
  /home/vscode/workspace/upstageailab-ocr-recsys-competition-ocr-2/ui/utils/command/models.py:39: PytestCollectionWarning: cannot collect test class 'TestCommandParams' because it has a __init__ constructor (from: tests/unit/test_command_modules.py)
    @dataclass

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================== 137 passed, 1 xfailed, 2 warnings in 7.77s ==================
